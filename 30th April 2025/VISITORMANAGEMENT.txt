CREATE DATABASE VisitorManagementApp

USE VisitorManagementApp;

CREATE TABLE LOCATION(
LOCATIONID BIGINT NOT NULL PRIMARY KEY,
LOCATIONNAME NVARCHAR(20)
)

ALTER TABLE LOCATION ADD CONSTRAINT
LOC_NAME_UNIQUE UNIQUE(LOCATIONNAME)

CREATE TABLE VISITORINFO(
VISITORID BIGINT NOT NULL PRIMARY KEY,
VISITORNAME NVARCHAR(30) NOT NULL,
VLOCATION BIGINT NOT NULL,
PARENTCOMPANY NVARCHAR(30) NOT NULL,
PURPOSE NVARCHAR(30) NOT NULL,
VISITINGDATE DATE NOT NULL,
HNAME BIGINT NOT NULL
)

CREATE TABLE USERINFO(
USERID BIGINT NOT NULL PRIMARY KEY,
USERNAME NVARCHAR(30) NOT NULL,
EMPNUM BIGINT NOT NULL,
DEPT NVARCHAR(30) NOT NULL,
LOCATIONID BIGINT NOT NULL,
CONTACTNO BIGINT NOT NULL,
ROLE NVARCHAR(10) NOT NULL
)

ALTER TABLE USERINFO ADD CONSTRAINT
USERINFO_CHECK CHECK(ROLE IN('HOST', 'MANAGER'))


ALTER TABLE VISITORINFO ADD CONSTRAINT
VISITOR_HNAME_FK FOREIGN KEY(HNAME)
REFERENCES VISITORINFO(VISITORID)


ALTER TABLE USERINFO ADD CONSTRAINT
USERINFO_LOCATION_FK FOREIGN KEY(ULOCATION)
REFERENCES LOCATION(LOCATIONID)